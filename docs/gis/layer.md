# 图层

## 图层概念

- [GIS 图层概念及应用](https://juejin.im/post/5d3ff32ef265da03986bcd21)

## 管理图层

### 调整图层顺序

`recoderLayer(layer, index)` 需求，调整新添加的图层为底图
```js
map.addLayer(cityLayer);
map.recoderLayer(cityLayer, 1);
```

## 要素服务跟动态服务的关系是什么？

## 切片服务与动态服务

1. 切片服务也可以以动态服务的方式进行加载。
2. 图层的索引号会因为动态添加/删除图层改变，如果运维没及时同步服务数据，即会导致系统的专题部分不可见。
3. 空间参考系 wid（投影坐标）。偏移为了数据安全。
4. 初始范围（显示指定地区位置）、全图范围
5. 最大返回记录数，如果要获取所有的记录数如何处理?，先获取 objectID，进行页面的分页显示，之后切割 id，填写 where 的范围。 1000 ---2000。
6. Bounding box。
7. 比例尺，可以控制缩放的范围来显示对应的图层、要素。解决初始化的图形繁杂问题。
8. Dynamic Layer
  - export
    - 坐标系设置
    -layer
      - 显示图层
      - 图层过滤（Name, label），这个跟 query 的查询过滤区别在哪？图层过滤是可以直接在加载图层，出一张过滤好的图，性能比直接叠加 graphic 要素要好。
    - 符号化渲染方式
      - 通过叠加 graphic，当页面复杂时，会导致系统性能问题。
      - Dynamic Layers 传入 render s信息，出图。
    - POST 请求代替 GET，解决开启多个图层时，GET 参数过长。
  - Identify（I 查询）
  - Find （地名地址查询/综合查询），可以查多个图层。
  - Feature Server ： 勾选 feature access 才能编辑、删除要素。这个与单个图层的 type 的 feature Layer 是有区别的。？待实践理解。
  - query
    - 输入与输出参考系。
    - 空间关系（包含）
    - distinct values 类别显示
9. 动态服务也可以进行 query 查询，不仅仅是要素服务。
10. 切片服务
    1.  与其他不同的是，具有切片等级。可以查看某个缩放等级的图片是否显示。
    2.  切片服务是在动态服务的基础上进行的切片，具有动态服务的功能，相当于一层缓存的作用。

### 切片服务

### 动态服务